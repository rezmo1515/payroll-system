# سامانه حقوق و دستمزد فارسی

این مخزن یک پیاده‌سازی سبک برای محاسبه فیش حقوقی بر پایه قوانین رایج کار ایران است که بدون نیاز به وابستگی‌های بیرونی قابل اجراست. به دلیل محدودیت دسترسی به پکیج‌های Composer، ساختار پروژه به صورت ماژولار و مستقل از فریم‌ورک لاراول پیاده‌سازی شده اما مفاهیم، محاسبات و ظاهر خروجی مطابق نیازمندی‌های یک سامانه فارسی و راست به چپ است.

## امکانات

- محاسبه مزایا و کسورات با استفاده از جدول فرمول‌ها در `config/payroll.php`
- پشتیبانی از مفاهیم متداول حقوق و دستمزد ایران (حقوق پایه، اضافه کاری، شب کاری، بن اولاد، بیمه، مالیات و ...)
- محاسبه تاریخ شمسی و نمایش اعداد با ارقام فارسی
- قالب HTML راست‌به‌چپ برای نمایش فیش حقوقی
- قابلیت شخصی‌سازی ضرایب و مقادیر پایه از طریق تنظیمات

## ساختار پوشه‌ها

```
.
├── autoload.php                # بارگذار ساده کلاس‌ها به سبک PSR-4
├── config/
│   └── payroll.php             # تنظیمات و فرمول‌های محاسباتی
├── public/
│   └── index.php               # نقطه ورود نمونه برای رندر فیش حقوقی
├── resources/
│   └── views/
│       └── payslip.php         # قالب رابط کاربری RTL
├── src/
│   ├── Payroll/
│   │   ├── DTO/                # آبجکت‌های انتقال داده
│   │   ├── Services/           # سرویس محاسبه حقوق
│   │   ├── Support/            # ابزارهای کمکی مانند ارزیاب فرمول
│   │   └── Employee.php        # مدل ساده کارمند
│   └── Support/
│       └── PersianFormatter.php
└── README.md
```

## اجرای نمونه

1. یک وب‌سرور PHP راه‌اندازی کنید:
   ```bash
   php -S 0.0.0.0:8000 -t public
   ```
2. مرورگر را روی `http://localhost:8000` باز کنید تا فیش نمونه را مشاهده کنید.

## شخصی‌سازی

- **تنظیمات پایه:** مقادیر پیش‌فرض مانند ضریب اضافه‌کاری، سقف معافیت مالیاتی و حق اولاد در `config/payroll.php` قرار دارند.
- **اضافه کردن آیتم جدید:** برای افزودن مزایا یا کسورات تازه کافی است یک کلید جدید در آرایه `components` تعریف کنید و فرمول محاسبه را بنویسید. مثال:
  ```php
  'mission_bonus' => [
      'title' => 'حق ماموریت',
      'type' => 'earning',
      'expression' => 'daily_wage * mission_days * 1.5',
  ],
  ```
- **داده‌های کارمند:** در سناریوی واقعی می‌توانید داده کارمند را از پایگاه داده یا فرم دریافت کرده و به شیء `Employee` تزریق کنید.

## تست دستی

برای اطمینان از صحت محاسبات می‌توانید مقادیر موجود در آرایه `$employeeData` داخل `public/index.php` را تغییر دهید و خروجی را بررسی کنید.

## نکته درباره لاراول

این پروژه به صورت مستقل ایجاد شده تا در نبود وابستگی‌های لاراول نیز قابل اجرا باشد. در صورت دسترسی به Composer می‌توانید کدهای موجود را در یک پروژه Laravel 12 قرار دهید و سرویس `PayrollCalculator` را به صورت سرویس کانتینر لاراول ثبت کرده و از قالب HTML در Blade استفاده کنید.
